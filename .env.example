# ─── App Settings ─────────────────────────────────────────────────────────────
# Generate with: openssl rand -hex 32
APP_SECRET=change-this-to-a-secure-random-string-of-at-least-32-chars

DATA_DIR=/app/data
LOG_LEVEL=info

# Enable proxy trust (set to 1 when behind Traefik/Nginx)
TRUST_PROXY=1

# Set to true when serving over HTTPS (required behind reverse proxy)
SECURE_COOKIES=true

# ─── OIDC Configuration ───────────────────────────────────────────────────────
# Your OIDC provider's issuer URL
# Authentik:  https://authentik.example.com/application/o/bloodtracker/
# Keycloak:   https://keycloak.example.com/realms/myrealm
# Authelia:   https://auth.example.com

OIDC_ISSUER_URL=https://auth.example.com/realms/myrealm
OIDC_CLIENT_ID=bloodtracker
OIDC_CLIENT_SECRET=your-client-secret-here

# Must end with /api/auth/callback
OIDC_REDIRECT_URI=https://bloodtracker.example.com/api/auth/callback

# Space-separated scopes
OIDC_SCOPES=openid profile email

# ─── LLM Configuration ────────────────────────────────────────────────────────
# Provider: gemini | openai | anthropic | ollama | openai_compatible

LLM_PROVIDER=gemini

# Gemini (Google AI Studio)
LLM_API_KEY=AIzaSy-your-google-ai-api-key
LLM_MODEL=gemini-2.5-flash
# LLM_API_URL=  # Leave empty for default Gemini endpoint

# OpenAI
# LLM_PROVIDER=openai
# LLM_API_KEY=sk-your-openai-api-key
# LLM_MODEL=gpt-4o

# Anthropic
# LLM_PROVIDER=anthropic
# LLM_API_KEY=sk-ant-your-anthropic-api-key
# LLM_MODEL=claude-sonnet-4-6

# Ollama (local)
# LLM_PROVIDER=ollama
# LLM_API_URL=http://ollama:11434
# LLM_MODEL=llama3
# LLM_API_KEY=  # Not needed for Ollama

# OpenAI-compatible API (LM Studio, vLLM, etc.)
# LLM_PROVIDER=openai_compatible
# LLM_API_URL=http://lmstudio:1234/v1
# LLM_API_KEY=not-needed
# LLM_MODEL=your-model-name

# ─── Admin Users ──────────────────────────────────────────────────────────────
# Comma-separated list of OIDC sub claims that get admin access
# In dev mode (DEV_AUTO_LOGIN=true) the user ID is "dev-user"
# ADMIN_USER_IDS=dev-user,auth0|abc123

# ─── Development Only (remove in production!) ─────────────────────────────────
# Bypasses OIDC and auto-logs in as "Dev User"
# DEV_AUTO_LOGIN=true

# ─── Docker Image ─────────────────────────────────────────────────────────────
# Wird von GitHub Actions gebaut und gepusht (ghcr.io)
BLOODTRACKER_IMAGE=ghcr.io/danst0/blutwerte:latest

# ─── Permissions ─────────────────────────────────────────────────────────────
# Use 'id -u' and 'id -g' on your host to find these values
UID=1000
GID=1000
